{"version":3,"file":"app.bundle.js","mappings":"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","sources":["webpack://flowater-webpack/webpack/runtime/chunk loaded","webpack://flowater-webpack/./src/scripts/pages/auth/login/login-presenter.js","webpack://flowater-webpack/./src/scripts/pages/home/home-page.js","webpack://flowater-webpack/./src/scripts/pages/laporan/laporan-presenter.js","webpack://flowater-webpack/./src/scripts/pages/laporan/laporan-page.js","webpack://flowater-webpack/./src/scripts/pages/addlaporan/add-laporan-presenter.js","webpack://flowater-webpack/./src/scripts/pages/addlaporan/add-laporan-page.js","webpack://flowater-webpack/./src/scripts/pages/detail/detail-presenter.js","webpack://flowater-webpack/./src/scripts/pages/error/404.js","webpack://flowater-webpack/./src/scripts/routes/routes.js","webpack://flowater-webpack/./src/scripts/pages/detail/detail-page.js","webpack://flowater-webpack/./src/scripts/routes/url-parser.js","webpack://flowater-webpack/./src/scripts/utils/notif.js","webpack://flowater-webpack/./src/scripts/pages/app.js","webpack://flowater-webpack/./src/scripts/index.js","webpack://flowater-webpack/./src/scripts/pages/auth/register/register-page.js","webpack://flowater-webpack/./src/scripts/data/story-idb.js","webpack://flowater-webpack/./src/scripts/utils/loader.js","webpack://flowater-webpack/./src/scripts/config.js","webpack://flowater-webpack/./src/scripts/pages/auth/login/login-page.js","webpack://flowater-webpack/./src/scripts/utils/auth.js","webpack://flowater-webpack/./src/scripts/pages/auth/register/register-presenter.js","webpack://flowater-webpack/./src/scripts/data/api.js","webpack://flowater-webpack/webpack/bootstrap","webpack://flowater-webpack/webpack/runtime/amd options","webpack://flowater-webpack/webpack/runtime/compat get default export","webpack://flowater-webpack/webpack/runtime/define property getters","webpack://flowater-webpack/webpack/runtime/global","webpack://flowater-webpack/webpack/runtime/hasOwnProperty shorthand","webpack://flowater-webpack/webpack/runtime/make namespace object","webpack://flowater-webpack/webpack/runtime/publicPath","webpack://flowater-webpack/webpack/runtime/jsonp chunk loading","webpack://flowater-webpack/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import { AuthAPI } from \"../../../data/api\";\r\nimport { setAuthToken } from \"../../../utils/auth\";\r\nimport { showLoader, hideLoader } from \"../../../utils/loader\";\r\n\r\nexport default class LoginPresenter {\r\n  constructor(view) {\r\n    this.view = view;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.form = document.getElementById(\"login-form\");\r\n    this.errorElement = document.getElementById(\"login-error\");\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    this.form.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n      await this.handleLogin();\r\n    });\r\n  }\r\n\r\n  async handleLogin() {\r\n    const email = document.getElementById(\"email\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n\r\n    this.clearErrors();\r\n\r\n    if (!email || !password) {\r\n      this.showError(\"Email dan password harus diisi\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      showLoader();\r\n      const response = await AuthAPI.login({ email, password });\r\n\r\n      if (response.error) {\r\n        this.showError(response.message);\r\n      } else {\r\n        setAuthToken(response.loginResult.token);\r\n        this.showSuccess(\"Login berhasil! Mengarahkan...\");\r\n        setTimeout(() => {\r\n          window.location.href = \"#/\";\r\n        }, 1500);\r\n      }\r\n    } catch (error) {\r\n      this.showError(\"Gagal login. Silakan coba lagi.\");\r\n      console.error(\"Login error:\", error);\r\n    } finally {\r\n      hideLoader();\r\n    }\r\n  }\r\n\r\n  showError(message) {\r\n    this.errorElement.textContent = message;\r\n    this.errorElement.className = \"error-message error\";\r\n    this.errorElement.style.display = \"block\";\r\n    this.errorElement.focus();\r\n  }\r\n\r\n  showSuccess(message) {\r\n    this.errorElement.textContent = message;\r\n    this.errorElement.className = \"error-message success\";\r\n    this.errorElement.style.display = \"block\";\r\n  }\r\n\r\n  clearErrors() {\r\n    this.errorElement.style.display = \"none\";\r\n    this.errorElement.className = \"error-message\";\r\n  }\r\n}\r\n","export default class HomePage {\n  async render() {\n    const container = document.createElement(\"div\");\n    container.innerHTML = `\n      <section class=\"hero\">\n        <div class=\"hero-content\">\n          <h1 class=\"hero-title\">Sharing stories pengguna Flowater</h1>\n          <p class=\"hero-subtitle\">(Komplen atau Laporan)</p>\n          <a href=\"#/addLaporan\" class=\"hero-button\">Buat Laporan Sekarang</a>\n        </div>\n      </section>\n    `;\n    return container;\n  }\n\n  async afterRender() {\n    // You can add any interactive functionality here\n  }\n}\n","import { StoryAPI } from \"../../data/api\";\r\nimport StoryIDB from \"../../data/story-idb\";\r\n\r\nexport default class LaporanPresenter {\r\n  constructor(view) {\r\n    this.view = view;\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      const { listStory } = await this._getAllStories();\r\n\r\n      if (!listStory || listStory.length === 0) {\r\n        this.view.showStories([]);\r\n        return;\r\n      }\r\n\r\n      await StoryIDB.saveStories(listStory); // Simpan ke IndexedDB\r\n      this.view.showStories(listStory);\r\n    } catch (error) {\r\n      console.warn(\"Fetch failed. Try loading from IndexedDB...\", error);\r\n      const localStories = await StoryIDB.getAllStories();\r\n\r\n      if (localStories.length > 0) {\r\n        this.view.showStories(localStories); // Tampilkan data lokal\r\n      } else {\r\n        this.view.showError(\"Gagal memuat data, dan tidak ada data lokal.\");\r\n      }\r\n    }\r\n  }\r\n\r\n  async _getAllStories() {\r\n    try {\r\n      const response = await StoryAPI.getAllStories();\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error fetching stories:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n","import LaporanPresenter from \"./laporan-presenter\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\n});\n\nexport default class LaporanPage {\n  constructor() {\n    this.storiesContainer = null;\n    this.map = null;\n  }\n\n  async render() {\n    const container = document.createElement(\"div\");\n    container.innerHTML = `\n    <main id=\"mainContent\" tabindex=\"-1\">\n      <section>\n        <div class=\"reports-list__map__container\">\n          <div id=\"map\" class=\"reports-list__map\"></div>\n          <div id=\"map-loading-container\"></div>\n        </div>\n      </section>\n      <br>\n      <section class=\"container\">\n      <button id=\"clear-data-btn\" class=\"cta-button danger\">Hapus Data Lokal</button>\n\n        <h1 style=\"text-align: center; margin-top:10px;\">Laporan Pengguna</h1>\n        <div id=\"stories-list\" class=\"stories-grid\"></div>\n      </section>\n      </main>\n    `;\n    return container;\n  }\n\n  async afterRender() {\n    const clearBtn = document.getElementById(\"clear-data-btn\");\n    if (clearBtn) {\n      clearBtn.addEventListener(\"click\", async () => {\n        await import(\"../../data/story-idb\").then((mod) =>\n          mod.default.clearAll()\n        );\n        alert(\"Data lokal dihapus.\");\n      });\n    }\n\n    const skipLink = document.querySelector(\".skip-link\");\n    if (skipLink) {\n      skipLink.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        const focusTarget =\n          document.getElementById(\"stories-list\") ||\n          document.querySelector(\"main\");\n        if (focusTarget) {\n          focusTarget.setAttribute(\"tabindex\", \"-1\");\n          focusTarget.focus();\n        }\n      });\n    }\n    await this.initialMap();\n  }\n\n  async initialMap() {\n    this.map = L.map(\"map\", {\n      center: [-6.914864, 107.608238],\n      scrollWheelZoom: false,\n      zoom: 13,\n    });\n\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n      maxZoom: 19,\n    }).addTo(this.map);\n\n    this.storiesContainer = document.getElementById(\"stories-list\");\n    new LaporanPresenter(this).init();\n  }\n\n  addMarkers(stories) {\n    if (!this.map) return;\n\n    this.map.eachLayer((layer) => {\n      if (layer instanceof L.Marker) {\n        this.map.removeLayer(layer);\n      }\n    });\n\n    stories.forEach((story) => {\n      if (story.lat && story.lon) {\n        const marker = L.marker([story.lat, story.lon]).addTo(this.map)\n          .bindPopup(`\n            <b>${story.name}</b><br>\n            ${story.description}<br>\n            <small>${new Date(story.createdAt).toLocaleString()}</small>\n          `);\n      }\n    });\n\n    if (stories.length > 0 && stories[0].lat && stories[0].lon) {\n      this.map.setView([stories[0].lat, stories[0].lon], 13);\n    }\n  }\n\n  showStories(stories) {\n    if (!this.storiesContainer) return;\n\n    if (stories.length === 0) {\n      this.storiesContainer.innerHTML = `<p>Tidak ada cerita.</p>`;\n      return;\n    }\n\n    this.storiesContainer.innerHTML = stories\n      .map((story) => this._generateStoryCard(story))\n      .join(\"\");\n\n    this.addMarkers(stories);\n  }\n\n  showError(message) {\n    if (this.storiesContainer) {\n      this.storiesContainer.innerHTML = `<p class=\"error\">Gagal memuat stories: ${message}</p>`;\n    }\n  }\n\n  _generateStoryCard(story) {\n    return `\n      <div class=\"story-card\">\n        <img src=\"${story.photoUrl}\" alt=\"${story.name}\" class=\"story-img\"/>\n        <div class=\"story-content\">\n          <div class=\"story-text\">\n            <h3>${story.name}</h3>\n            <p>${story.description}</p>\n            <small>${new Date(story.createdAt).toLocaleString()}</small>\n            ${\n              story.lat && story.lon\n                ? `<p>Lokasi: ${story.lat}, ${story.lon}</p>`\n                : \"\"\n            }\n          </div>\n          <div class=\"story-actions\">\n            <a href=\"#/detail/${story.id}\" class=\"cta-button\">Lihat Detail</a>\n            \n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n","import { StoryAPI } from \"../../data/api\";\r\nimport { getAuthToken } from \"../../utils/auth\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport { NotificationAPI } from \"../../data/api\";\r\n\r\n// Leaflet icon fix\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\r\n});\r\n\r\nexport default class AddStoryPresenter {\r\n  constructor(view) {\r\n    this.view = view;\r\n    this.state = {\r\n      map: null,\r\n      marker: null,\r\n      photoFile: null,\r\n      mediaStream: null,\r\n      selectedCamera: null,\r\n    };\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      await this._setupDOMReferences();\r\n      await this._initializeMap();\r\n      this._setupEventListeners();\r\n      await this._loadCameras();\r\n    } catch (error) {\r\n      console.error(\"Presenter initialization failed:\", error);\r\n      this.view.showError(\"Gagal memuat halaman. Silakan coba lagi.\");\r\n    }\r\n  }\r\n\r\n  async _setupDOMReferences() {\r\n    this.elements = {\r\n      form: document.getElementById(\"story-form\"),\r\n      errorElement: document.getElementById(\"error-message\"),\r\n      photoInput: document.getElementById(\"photo\"),\r\n      photoPreview: document.getElementById(\"photo-preview\"),\r\n      cameraPreview: document.getElementById(\"camera-preview\"),\r\n      cameraSelect: document.getElementById(\"camera-select\"),\r\n      getLocationBtn: document.getElementById(\"get-location\"),\r\n      latInput: document.getElementById(\"lat\"),\r\n      lonInput: document.getElementById(\"lon\"),\r\n    };\r\n\r\n    // Validasi semua elemen penting ada\r\n    const requiredElements = [\"form\", \"errorElement\", \"photoInput\"];\r\n    requiredElements.forEach((key) => {\r\n      if (!this.elements[key]) {\r\n        throw new Error(`Element ${key} not found`);\r\n      }\r\n    });\r\n  }\r\n\r\n  async _initializeMap() {\r\n    const mapContainer = document.getElementById(\"map\");\r\n    if (!mapContainer) {\r\n      throw new Error(\"Map container not found\");\r\n    }\r\n\r\n    // Cek jika peta sudah ada (untuk kasus navigasi)\r\n    if (mapContainer._leaflet_id) {\r\n      this.state.map = L.map(mapContainer, { reuse: true });\r\n      this.state.map.invalidateSize();\r\n      return;\r\n    }\r\n\r\n    // Inisialisasi peta baru\r\n    this.state.map = L.map(mapContainer, {\r\n      center: [-6.914864, 107.608238],\r\n      zoom: 13,\r\n      tap: false, // Fix untuk mobile devices\r\n    });\r\n\r\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n      attribution: \"&copy; OpenStreetMap contributors\",\r\n      maxZoom: 19,\r\n    }).addTo(this.state.map);\r\n\r\n    // Setup event handlers\r\n    this.state.map.on(\"click\", (e) => {\r\n      this._setLocation(e.latlng.lat, e.latlng.lng);\r\n    });\r\n  }\r\n\r\n  _setupEventListeners() {\r\n    // Camera events\r\n    document.getElementById(\"camera-select\").addEventListener(\"change\", (e) => {\r\n      this._switchCamera(e.target.value).catch(console.error);\r\n    });\r\n    document\r\n      .getElementById(\"open-camera\")\r\n      .addEventListener(\"click\", () => this._toggleCamera());\r\n    document\r\n      .getElementById(\"capture-photo\")\r\n      .addEventListener(\"click\", () => this._capturePhoto());\r\n    document.getElementById(\"close-camera\").addEventListener(\"click\", () => {\r\n      this._stopCamera();\r\n      document.getElementById(\"camera-container\").hidden = true;\r\n    });\r\n\r\n    // Location events\r\n    this.elements.getLocationBtn.addEventListener(\"click\", () =>\r\n      this._getCurrentLocation()\r\n    );\r\n    document\r\n      .getElementById(\"clear-location\")\r\n      .addEventListener(\"click\", () => this._clearLocation());\r\n\r\n    // Form submission\r\n    this.elements.form.addEventListener(\"submit\", (e) => this._handleSubmit(e));\r\n    this.elements.photoInput.addEventListener(\"change\", (e) =>\r\n      this._handleFileSelect(e)\r\n    );\r\n  }\r\n\r\n  async _loadCameras() {\r\n    try {\r\n      // Minta izin kamera terlebih dahulu\r\n      const tempStream = await navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n      });\r\n      tempStream.getTracks().forEach((track) => track.stop());\r\n\r\n      // Dapatkan daftar perangkat\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      this.state.availableCameras = devices.filter(\r\n        (d) => d.kind === \"videoinput\"\r\n      );\r\n\r\n      // Update dropdown\r\n      this._updateCameraOptions();\r\n\r\n      // Set kamera default (kamera belakang jika tersedia)\r\n      const backCamera = this.state.availableCameras.find(\r\n        (cam) =>\r\n          cam.label.toLowerCase().includes(\"back\") ||\r\n          cam.label.toLowerCase().includes(\"rear\")\r\n      );\r\n\r\n      if (backCamera) {\r\n        this.state.selectedCamera = backCamera.deviceId;\r\n        const select = document.getElementById(\"camera-select\");\r\n        select.value = backCamera.deviceId;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error loading cameras:\", error);\r\n      this.view.showError(\"Tidak dapat mengakses daftar kamera\");\r\n    }\r\n  }\r\n\r\n  _updateCameraOptions() {\r\n    const select = this.elements.cameraSelect;\r\n    select.innerHTML = '<option value=\"\">Pilih Kamera...</option>';\r\n\r\n    this.state.availableCameras.forEach((device) => {\r\n      const option = document.createElement(\"option\");\r\n      option.value = device.deviceId;\r\n      option.text = device.label || `Kamera ${select.options.length}`;\r\n      select.appendChild(option);\r\n    });\r\n  }\r\n\r\n  async _toggleCamera() {\r\n    // Jika kamera aktif, stop sepenuhnya\r\n    if (this.state.mediaStream) {\r\n      await this._stopCamera();\r\n      document.getElementById(\"camera-container\").hidden = true;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Start kamera baru\r\n      const constraints = {\r\n        video: {\r\n          deviceId: this.state.selectedCamera\r\n            ? { exact: this.state.selectedCamera }\r\n            : { facingMode: \"environment\" },\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 },\r\n        },\r\n      };\r\n\r\n      this.state.mediaStream = await navigator.mediaDevices.getUserMedia(\r\n        constraints\r\n      );\r\n      const cameraPreview = document.getElementById(\"camera-preview\");\r\n\r\n      cameraPreview.srcObject = this.state.mediaStream;\r\n\r\n      // Tunggu sampai video benar-benar ready\r\n      await new Promise((resolve) => {\r\n        cameraPreview.onloadedmetadata = () => {\r\n          cameraPreview.play().then(resolve);\r\n        };\r\n      });\r\n\r\n      document.getElementById(\"camera-container\").hidden = false;\r\n    } catch (error) {\r\n      console.error(\"Camera error:\", error);\r\n      this.view.showError(\"Gagal memulai kamera\");\r\n      await this._stopCamera();\r\n    }\r\n  }\r\n\r\n  async _switchCamera(deviceId) {\r\n    // 1. Hentikan kamera yang aktif dengan benar\r\n    await this._stopCamera(); // Tambahkan await\r\n\r\n    // 2. Reset video element\r\n    const cameraPreview = document.getElementById(\"camera-preview\");\r\n    cameraPreview.srcObject = null;\r\n\r\n    if (!deviceId) {\r\n      this.state.selectedCamera = null;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // 3. Start kamera baru dengan constraints yang tepat\r\n      const constraints = {\r\n        video: {\r\n          deviceId: { exact: deviceId },\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 },\r\n          facingMode: deviceId === \"environment\" ? \"environment\" : \"user\", // Fallback\r\n        },\r\n      };\r\n\r\n      // 4. Dapatkan stream baru\r\n      this.state.mediaStream = await navigator.mediaDevices.getUserMedia(\r\n        constraints\r\n      );\r\n      this.state.selectedCamera = deviceId;\r\n\r\n      // 5. Attach stream ke video element\r\n      cameraPreview.srcObject = this.state.mediaStream;\r\n\r\n      // 6. Tunggu sampai video benar-benar siap\r\n      await new Promise((resolve) => {\r\n        cameraPreview.onloadedmetadata = () => {\r\n          cameraPreview\r\n            .play()\r\n            .then(resolve)\r\n            .catch((e) => {\r\n              console.error(\"Video play error:\", e);\r\n              this.view.showError(\"Kamera tidak dapat dimulai\");\r\n            });\r\n        };\r\n      });\r\n\r\n      // 7. Tampilkan container kamera\r\n      document.getElementById(\"camera-container\").hidden = false;\r\n    } catch (error) {\r\n      console.error(\"Gagal switch kamera:\", error);\r\n      this._stopCamera();\r\n      this.view.showError(\"Gagal mengaktifkan kamera ini\");\r\n\r\n      // Reset dropdown ke pilihan sebelumnya\r\n      document.getElementById(\"camera-select\").value =\r\n        this.state.selectedCamera || \"\";\r\n    }\r\n  }\r\n\r\n  // Method stop camera yang diperbarui\r\n  async _stopCamera() {\r\n    if (this.state.mediaStream) {\r\n      // Hentikan semua track secara eksplisit\r\n      this.state.mediaStream.getTracks().forEach((track) => {\r\n        track.stop(); // Penting: stop() setiap track\r\n        track.enabled = false; // Nonaktifkan\r\n      });\r\n\r\n      // Lepaskan referensi stream\r\n      this.state.mediaStream = null;\r\n    }\r\n\r\n    // Reset video element\r\n    const cameraPreview = document.getElementById(\"camera-preview\");\r\n    if (cameraPreview) {\r\n      cameraPreview.srcObject = null;\r\n      cameraPreview.load(); // Reload video element\r\n      cameraPreview.pause(); // Pastikan video berhenti\r\n    }\r\n  }\r\n\r\n  _capturePhoto() {\r\n    const canvas = document.getElementById(\"photo-canvas\");\r\n    const video = document.getElementById(\"camera-preview\");\r\n\r\n    // Pastikan video sedang berjalan\r\n    if (video.paused || video.readyState < HTMLMediaElement.HAVE_ENOUGH_DATA) {\r\n      this.view.showError(\"Kamera belum siap\");\r\n      return;\r\n    }\r\n\r\n    // Set ukuran canvas sesuai video\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    // Gambar frame video ke canvas\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    // Konversi ke blob dan tampilkan preview\r\n    canvas.toBlob(\r\n      (blob) => {\r\n        if (!blob) {\r\n          this.view.showError(\"Gagal mengambil foto\");\r\n          return;\r\n        }\r\n\r\n        this.state.photoFile = new File([blob], `photo-${Date.now()}.jpg`, {\r\n          type: \"image/jpeg\",\r\n        });\r\n\r\n        const photoPreview = document.getElementById(\"photo-preview\");\r\n        photoPreview.src = URL.createObjectURL(blob);\r\n        photoPreview.hidden = false;\r\n        document.getElementById(\"file-name\").textContent = \"Foto dari kamera\";\r\n\r\n        // Sembunyikan kamera setelah capture\r\n        this._stopCamera();\r\n        document.getElementById(\"camera-container\").hidden = true;\r\n      },\r\n      \"image/jpeg\",\r\n      0.85\r\n    );\r\n  }\r\n\r\n  _handleFileSelect(event) {\r\n    const file = event.target.files[0];\r\n    if (!file.type.match(\"image.*\")) {\r\n      this.view.showError(\"File harus berupa gambar\");\r\n      return;\r\n    }\r\n\r\n    this.state.photoFile = file;\r\n    this.elements.photoPreview.src = URL.createObjectURL(file);\r\n    this.elements.photoPreview.hidden = false;\r\n  }\r\n\r\n  async _getCurrentLocation() {\r\n    try {\r\n      const position = await new Promise((resolve, reject) => {\r\n        navigator.geolocation.getCurrentPosition(resolve, reject, {\r\n          enableHighAccuracy: true,\r\n          timeout: 10000,\r\n        });\r\n      });\r\n\r\n      this._setLocation(position.coords.latitude, position.coords.longitude);\r\n    } catch (error) {\r\n      this.view.showError(\r\n        `Gagal mendapatkan lokasi: ${this._getGeoError(error)}`\r\n      );\r\n    }\r\n  }\r\n\r\n  _getGeoError(error) {\r\n    switch (error.code) {\r\n      case error.PERMISSION_DENIED:\r\n        return \"Izin lokasi ditolak\";\r\n      case error.POSITION_UNAVAILABLE:\r\n        return \"Lokasi tidak tersedia\";\r\n      case error.TIMEOUT:\r\n        return \"Waktu permintaan habis\";\r\n      default:\r\n        return \"Error tidak diketahui\";\r\n    }\r\n  }\r\n\r\n  _setLocation(lat, lon) {\r\n    this.elements.latInput.value = lat;\r\n    this.elements.lonInput.value = lon;\r\n\r\n    if (this.state.marker) {\r\n      this.state.marker.setLatLng([lat, lon]);\r\n    } else {\r\n      this.state.marker = L.marker([lat, lon]).addTo(this.state.map);\r\n    }\r\n\r\n    this.state.map.setView([lat, lon], 15);\r\n  }\r\n\r\n  _clearLocation() {\r\n    this.elements.latInput.value = \"\";\r\n    this.elements.lonInput.value = \"\";\r\n\r\n    if (this.state.marker) {\r\n      this.state.map.removeLayer(this.state.marker);\r\n      this.state.marker = null;\r\n    }\r\n  }\r\n\r\n  async _handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    const description = document.getElementById(\"description\").value.trim();\r\n    if (!description || !this.state.photoFile) {\r\n      this.view.showError(\"Deskripsi dan foto harus diisi\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"description\", description);\r\n      formData.append(\"photo\", this.state.photoFile);\r\n\r\n      if (this.elements.latInput.value && this.elements.lonInput.value) {\r\n        formData.append(\"lat\", this.elements.latInput.value);\r\n        formData.append(\"lon\", this.elements.lonInput.value);\r\n      }\r\n\r\n      const token = getAuthToken();\r\n      const response = token\r\n        ? await StoryAPI.addStory(formData, token)\r\n        : await StoryAPI.addStoryGuest(formData);\r\n\r\n      if (response.error) throw new Error(response.message);\r\n\r\n      if (Notification.permission === \"granted\") {\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.showNotification(\"Laporan Terkirim\", {\r\n            body: \"Laporan Anda berhasil ditambahkan!\",\r\n            icon: \"/icons/icon-192x192.png\", // sesuaikan dengan asset kamu\r\n            tag: \"laporan-baru\",\r\n            vibrate: [100, 50, 100],\r\n            data: {\r\n              dateOfArrival: Date.now(),\r\n              primaryKey: 1,\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      alert(\"Laporan berhasil ditambahkan!\");\r\n      window.location.hash = \"#/\";\r\n    } catch (error) {\r\n      this.view.showError(`Gagal mengirim: ${error.message}`);\r\n    } finally {\r\n      this._stopCamera();\r\n    }\r\n  }\r\n\r\n  // Untuk handle page revisit\r\n  async onPageRevisit() {\r\n    await this._setupDOMReferences();\r\n    if (this.state.map) {\r\n      this.state.map.invalidateSize();\r\n    }\r\n  }\r\n}\r\n","import AddStoryPresenter from \"./add-laporan-presenter\";\n\nexport default class AddStoryPage {\n  constructor() {\n    this.presenter = null;\n    this.container = null;\n    this.isFirstRender = true;\n  }\n\n  async render() {\n    this.container = document.createElement(\"div\");\n    this.container.innerHTML = `\n    <main id=\"mainContent\" tabindex=\"-1\">\n      <section class=\"container\" aria-labelledby=\"form-title\">\n        <h1 id=\"form-title\" style=\"text-align: center;\">Tambah Laporan Baru</h1>\n        \n        <form id=\"story-form\" class=\"story-form\" enctype=\"multipart/form-data\" aria-describedby=\"form-instructions\">   \n          <div role=\"alert\" id=\"error-message\" class=\"error-message\" hidden></div>\n          \n          <!-- Deskripsi -->\n          <div class=\"form-group\">\n            <label for=\"description\" class=\"form-label\">\n              Deskripsi Laporan <span class=\"required\">*</span>\n            </label>\n            <textarea \n              id=\"description\" \n              class=\"form-input\" \n              required\n              aria-required=\"true\"\n              placeholder=\"Masukkan deskripsi laporan Anda\"\n              rows=\"5\"\n            ></textarea>\n            <div id=\"description-help\" class=\"form-help\">Maksimal 500 karakter</div>\n          </div>\n          \n          <!-- Unggah Foto -->\n          <div class=\"form-group\">\n            <fieldset class=\"photo-upload\">\n              <legend>Unggah Foto</legend>\n              \n              <div class=\"photo-options\">\n                <div class=\"photo-option\">\n                  <label for=\"photo\" class=\"file-upload-label\">\n                    <span id=\"file-name\" class=\"file-name\">Belum ada file dipilih</span>\n                    <input type=\"file\" id=\"photo\" accept=\"image/*\" capture=\"environment\">\n                  </label>\n                </div>\n                \n                <div class=\"photo-or\">atau</div>\n                <div class=\"photo-option\">\n                <button type=\"button\" id=\"open-camera\" class=\"camera-button\">\n                  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n                    <path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" fill=\"currentColor\"/>\n                    <path d=\"M20 4H16.83L15.59 2.65C15.22 2.24 14.68 2 14.12 2H9.88C9.32 2 8.78 2.24 8.4 2.65L7.17 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17Z\" fill=\"currentColor\"/>\n                  </svg>\n                  Ambil Foto\n                </button>\n              </div>\n                  <select id=\"camera-select\" class=\"camera-select\" aria-label=\"Pilih kamera\">\n                    <option value=\"\">Pilih Kamera...</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div id=\"camera-container\" hidden>\n                <video id=\"camera-preview\" width=\"300\" height=\"200\" style=\"display: block; margin: 0 auto; border: 1px solid gray;\" playsinline></video>\n                <div class=\"camera-controls\">\n                  <button type=\"button\" id=\"capture-photo\">Ambil Foto</button>\n                  <button type=\"button\" id=\"close-camera\">Tutup Kamera</button>\n                </div>\n              </div>\n              \n              <canvas id=\"photo-canvas\" hidden></canvas>\n              <img id=\"photo-preview\" class=\"photo-preview\" hidden>\n            </fieldset>\n          </div>\n          \n          <!-- Peta dan Lokasi -->\n          <div class=\"form-group\">\n            <div class=\"location-fieldset\">\n              <legend class=\"form-label\">Lokasi (Opsional)</legend>\n              \n              <div id=\"map\" class=\"location-map\" tabindex=\"0\" aria-label=\"Peta untuk memilih lokasi laporan\"></div>\n              \n              <div class=\"location-controls\">\n                <button \n                  type=\"button\" \n                  id=\"get-location\" \n                  class=\"location-button\"\n                  aria-label=\"Gunakan lokasi saat ini\"\n                >\n                  <svg aria-hidden=\"true\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                    <path fill=\"currentColor\" d=\"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\n                  </svg>\n                  Gunakan Lokasi Saat Ini\n                </button>\n                \n                <button \n                  type=\"button\" \n                  id=\"clear-location\" \n                  class=\"location-button secondary\"\n                  aria-label=\"Hapus lokasi yang dipilih\"\n                >\n                  <svg aria-hidden=\"true\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                    <path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                  </svg>\n                  Hapus Lokasi\n                </button>\n              </div>\n              \n              <div class=\"location-coordinates\">\n                <label for=\"lat\" class=\"coordinate-label\">Latitude:</label>\n                <input \n                  type=\"text\" \n                  id=\"lat\" \n                  class=\"coordinate-input\"\n                  step=\"any\"\n                  aria-label=\"Latitude\"\n                  placeholder=\"-6.123456\"\n                >\n                \n                <label for=\"lon\" class=\"coordinate-label\">Longitude:</label>\n                <input \n                  type=\"text\" \n                  id=\"lon\" \n                  class=\"coordinate-input\"\n                  step=\"any\"\n                  aria-label=\"Longitude\"\n                  placeholder=\"106.123456\"\n                >\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"form-actions\">\n            <button type=\"submit\" style=\"border: none;\" class=\"cta-button\">\n              Kirim Laporan\n            </button>\n            <a href=\"#/\" class=\"cta-button secondary\">Batal</a>\n          </div>\n        </form>\n      </section>\n</main>\n\n    `;\n\n    return this.container;\n  }\n\n  async afterRender() {\n    const skipLink = document.querySelector(\".skip-link\");\n    if (skipLink) {\n      skipLink.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        const focusTarget =\n          document.getElementById(\"description\") ||\n          document.querySelector(\"main\");\n        if (focusTarget) {\n          focusTarget.setAttribute(\"tabindex\", \"-1\");\n          focusTarget.focus();\n        }\n      });\n    }\n\n    if (this.isFirstRender) {\n      this.presenter = new AddStoryPresenter(this);\n      await this.presenter.init();\n      this.isFirstRender = false;\n    } else {\n      await this.presenter.onPageRevisited();\n    }\n  }\n\n  showError(message) {\n    const errorElement = this.container.querySelector(\"#error-message\");\n    if (errorElement) {\n      errorElement.textContent = message;\n      errorElement.hidden = false;\n      errorElement.focus();\n    }\n  }\n\n  clearError() {\n    const errorElement = this.container.querySelector(\"#error-message\");\n    if (errorElement) {\n      errorElement.hidden = true;\n      errorElement.textContent = \"\";\n    }\n  }\n}\n","import { StoryAPI } from \"../../data/api\";\r\n\r\nexport default class DetailPresenter {\r\n  constructor(view) {\r\n    this.view = view;\r\n    this.storyAPI = StoryAPI;\r\n  }\r\n\r\n  handleSkipLink() {\r\n    const skipLink = document.querySelector(\".skip-link\");\r\n    if (skipLink) {\r\n      skipLink.addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        const focusTarget = document.getElementById(\"mainContent\");\r\n        if (focusTarget) {\r\n          focusTarget.setAttribute(\"tabindex\", \"-1\");\r\n          focusTarget.focus();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  async loadStoryDetail(id) {\r\n    try {\r\n      const { story } = await this.storyAPI.getStoryDetail(id);\r\n      this.view.showStoryDetail({\r\n        name: story.name,\r\n        description: story.description,\r\n        photoUrl: story.photoUrl,\r\n        createdAt: story.createdAt,\r\n        lat: story.lat,\r\n        lon: story.lon,\r\n      });\r\n    } catch (error) {\r\n      this.view.showError(error.message);\r\n    }\r\n  }\r\n}\r\n","import animationData from \"../../../public/animations/404.json\";\r\nimport lottie from \"lottie-web\";\r\n\r\nexport default class NotFoundPage {\r\n  async render() {\r\n    return `\r\n      <div id=\"not-found-container\" style=\"text-align: center; padding: 2rem;\">\r\n        <div id=\"not-found-animation\" style=\"width: 300px; margin: auto;\"></div>\r\n        <h2>Oops! Halaman tidak ditemukan.</h2>\r\n        <a href=\"#/\">Kembali ke Beranda</a>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  async afterRender() {\r\n    lottie.loadAnimation({\r\n      container: document.getElementById(\"not-found-animation\"),\r\n      renderer: \"svg\",\r\n      loop: true,\r\n      autoplay: true,\r\n      animationData: animationData,\r\n    });\r\n  }\r\n}\r\n","import HomePage from \"../pages/home/home-page\";\nimport LaporanPage from \"../pages/laporan/laporan-page\";\nimport AddLaporanPage from \"../pages/addlaporan/add-laporan-page\";\nimport LoginPage from \"../pages/auth/login/login-page\";\nimport RegisterPage from \"../pages/auth/register/register-page\";\nimport DetailPage from \"../pages/detail/detail-page\";\nimport NotFoundPage from \"../pages/error/404\";\n\nimport {\n  checkAuthenticatedRoute,\n  checkUnauthenticatedRouteOnly,\n} from \"../utils/auth\";\n\nconst routes = {\n  \"/\": () => checkAuthenticatedRoute(new HomePage()),\n  \"/laporan\": () => checkAuthenticatedRoute(new LaporanPage()),\n  \"/detail/:id\": checkAuthenticatedRoute(new DetailPage()),\n  \"/addLaporan\": () => new AddLaporanPage(),\n\n  \"/login\": () => checkUnauthenticatedRouteOnly(new LoginPage()),\n  \"/register\": () => checkUnauthenticatedRouteOnly(new RegisterPage()),\n\n  \"*\": () => new NotFoundPage(),\n\n  // Alternatif jika ingin menangani error khusus\n  \"/404\": () => new NotFoundPage(),\n};\n\nexport default routes;\n","import DetailPresenter from \"./detail-presenter.js\";\r\n\r\nexport default class DetailPage {\r\n  constructor() {\r\n    this.presenter = new DetailPresenter(this);\r\n  }\r\n\r\n  async render() {\r\n    const container = document.createElement(\"div\");\r\n    container.innerHTML = `\r\n      <main id=\"mainContent\" tabindex=\"-1\">\r\n        <section class=\"container\">\r\n          <h1>Detail Laporan</h1>\r\n          <div id=\"story-detail\" class=\"story-detail\"></div>\r\n        </section>\r\n      </main>\r\n    `;\r\n    return container;\r\n  }\r\n\r\n  async afterRender() {\r\n    const hash = window.location.hash;\r\n    const id = hash.split(\"/\")[2];\r\n    this.presenter.handleSkipLink();\r\n    await this.presenter.loadStoryDetail(id);\r\n  }\r\n\r\n  showStoryDetail(story) {\r\n    const detailContainer = document.getElementById(\"story-detail\");\r\n    detailContainer.innerHTML = `\r\n      <div class=\"story-card\">\r\n        <img src=\"${story.photoUrl}\" alt=\"${story.name}\" class=\"story-img\"/>\r\n        <div class=\"story-content\">\r\n          <h2>${story.name}</h2>\r\n          <p>${story.description}</p>\r\n          <small>Dibuat pada: ${new Date(\r\n            story.createdAt\r\n          ).toLocaleString()}</small>\r\n          ${\r\n            story.lat && story.lon\r\n              ? `<p>Lokasi: ${story.lat}, ${story.lon}</p>`\r\n              : \"\"\r\n          }\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  showError(message) {\r\n    const detailContainer = document.getElementById(\"story-detail\");\r\n    detailContainer.innerHTML = `<p class=\"error\">Gagal memuat detail: ${message}</p>`;\r\n  }\r\n}\r\n","function extractPathnameSegments(path) {\n  const splitUrl = path.split(\"/\");\n\n  return {\n    resource: splitUrl[1] || null,\n    id: splitUrl[2] || null,\n  };\n}\n\nfunction constructRouteFromSegments(pathSegments) {\n  let pathname = \"\";\n\n  if (pathSegments.resource) {\n    pathname = pathname.concat(`/${pathSegments.resource}`);\n  }\n\n  if (pathSegments.id) {\n    pathname = pathname.concat(\"/:id\");\n  }\n\n  return pathname || \"/\";\n}\n\nexport function getActivePathname() {\n  return location.hash.replace(\"#\", \"\") || \"/\";\n}\n\nexport function getActiveRoute(routes) {\n  const pathname = getActivePathname();\n  const urlSegments = extractPathnameSegments(pathname);\n  const constructedRoute = constructRouteFromSegments(urlSegments);\n\n  // Cek jika route ada dalam daftar routes yang didefinisikan\n  if (!routes[constructedRoute] && !routes[\"*\"]) {\n    return \"404\"; // Fallback ke halaman error\n  }\n\n  return constructedRoute;\n}\n\nexport function parseActivePathname() {\n  const pathname = getActivePathname();\n  return extractPathnameSegments(pathname);\n}\n\nexport function getRoute(pathname) {\n  const urlSegments = extractPathnameSegments(pathname);\n  return constructRouteFromSegments(urlSegments);\n}\n\nexport function parsePathname(pathname) {\n  return extractPathnameSegments(pathname);\n}\n","import CONFIG from \"../config\";\r\nimport { getAuthToken } from \"./auth\";\r\n\r\n// Helper untuk konversi VAPID key\r\nfunction urlBase64ToUint8Array(base64String) {\r\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\r\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n\r\n  const rawData = window.atob(base64);\r\n  const outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}\r\n\r\n// Cek dukungan browser\r\nexport function isPushSupported() {\r\n  return \"PushManager\" in window && \"serviceWorker\" in navigator;\r\n}\r\n\r\n// Meminta izin notifikasi\r\nexport async function requestNotificationPermission() {\r\n  try {\r\n    const permission = await Notification.requestPermission();\r\n    return permission === \"granted\";\r\n  } catch (error) {\r\n    console.error(\"Error requesting notification permission:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Dapatkan subscription saat ini\r\nexport async function getCurrentSubscription() {\r\n  if (!isPushSupported()) return null;\r\n\r\n  const registration = await navigator.serviceWorker.ready;\r\n  return registration.pushManager.getSubscription();\r\n}\r\n\r\n// Subscribe user ke push notification\r\nexport async function subscribeUser() {\r\n  try {\r\n    // Validasi environment\r\n    if (!isPushSupported()) {\r\n      throw new Error(\"Browser tidak mendukung Push Notification\");\r\n    }\r\n\r\n    // Dapatkan registration\r\n    const registration = await navigator.serviceWorker.ready;\r\n\r\n    // Cek subscription yang ada\r\n    let subscription = await registration.pushManager.getSubscription();\r\n\r\n    // Jika sudah subscribe, gunakan yang ada\r\n    if (subscription) {\r\n      return subscription;\r\n    }\r\n\r\n    // Buat subscription baru\r\n    const convertedVapidKey = urlBase64ToUint8Array(CONFIG.VAPID_PUBLIC_KEY);\r\n    subscription = await registration.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: convertedVapidKey,\r\n    });\r\n\r\n    // Validasi subscription\r\n    if (!subscription || !subscription.endpoint) {\r\n      throw new Error(\"Gagal membuat subscription\");\r\n    }\r\n\r\n    // Kirim ke server\r\n    await sendSubscriptionToServer(subscription);\r\n\r\n    return subscription;\r\n  } catch (error) {\r\n    console.error(\"Error subscribing user:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Helper untuk ekstrak keys dari FCM\r\nasync function extractKeysFromFCM(subscription) {\r\n  try {\r\n    // Untuk FCM, kita mungkin perlu mengurai endpoint untuk mendapatkan keys\r\n    const endpointParts = subscription.endpoint.split(\"/\");\r\n    const subscriptionId = endpointParts[endpointParts.length - 1];\r\n\r\n    return {\r\n      p256dh: subscriptionId,\r\n      auth: crypto.getRandomValues(new Uint8Array(16)).join(\"\"),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Failed to extract keys from FCM:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Unsubscribe user dari push notification\r\nexport async function unsubscribeUser() {\r\n  try {\r\n    // 1. Dapatkan subscription saat ini\r\n    const subscription = await getCurrentSubscription();\r\n\r\n    if (!subscription) {\r\n      console.log(\"No active subscription found\");\r\n      return true;\r\n    }\r\n\r\n    // 2. Unsubscribe dari push service\r\n    const successfullyUnsubscribed = await subscription.unsubscribe();\r\n\r\n    if (successfullyUnsubscribed) {\r\n      // 3. Hapus dari server\r\n      await deleteSubscriptionFromServer(subscription.endpoint);\r\n\r\n      // 4. Hapus dari localStorage\r\n      localStorage.removeItem(\"pushSubscription\");\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  } catch (error) {\r\n    console.error(\"Error unsubscribing user:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Helper: Kirim subscription ke server\r\nasync function sendSubscriptionToServer(subscription) {\r\n  try {\r\n    // Validasi subscription dan keys\r\n    if (!subscription || !subscription.endpoint) {\r\n      throw new Error(\"Invalid subscription object\");\r\n    }\r\n\r\n    // Pastikan keys ada, jika tidak coba ekstrak dari options\r\n    const keys = subscription.keys || {};\r\n    const p256dh = keys.p256dh || extractP256dhKey(subscription);\r\n    const auth = keys.auth || extractAuthKey(subscription);\r\n\r\n    if (!p256dh || !auth) {\r\n      throw new Error(\"Missing required subscription keys\");\r\n    }\r\n\r\n    const response = await fetch(`${CONFIG.BASE_URL}/notifications/subscribe`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${getAuthToken()}`,\r\n      },\r\n      body: JSON.stringify({\r\n        endpoint: subscription.endpoint,\r\n        keys: {\r\n          p256dh: p256dh,\r\n          auth: auth,\r\n        },\r\n      }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.message || \"Failed to send subscription\");\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(\"Error sending subscription:\", {\r\n      error: error.message,\r\n      subscription: subscription,\r\n    });\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Helper functions untuk ekstrak keys jika tidak tersedia langsung\r\nfunction extractP256dhKey(subscription) {\r\n  // Coba ekstrak dari endpoint FCM\r\n  if (subscription.endpoint.includes(\"fcm.googleapis.com\")) {\r\n    const endpointParts = subscription.endpoint.split(\"/\");\r\n    return endpointParts[endpointParts.length - 1];\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction extractAuthKey(subscription) {\r\n  // Generate random auth token jika tidak tersedia\r\n  return crypto.getRandomValues(new Uint8Array(16)).join(\"\");\r\n}\r\n// Helper: Hapus subscription dari server\r\nasync function deleteSubscriptionFromServer(endpoint) {\r\n  try {\r\n    const response = await fetch(`${CONFIG.BASE_URL}/notifications/subscribe`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${getAuthToken()}`,\r\n      },\r\n      body: JSON.stringify({ endpoint }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to delete subscription\");\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(\"Error deleting subscription:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Di akhir notif.js\r\nexport async function initializePushNotifications() {\r\n  try {\r\n    if (!isPushSupported()) {\r\n      console.log(\"Push notifications not supported\");\r\n      return false;\r\n    }\r\n\r\n    const registration = await navigator.serviceWorker.ready;\r\n    let subscription = await registration.pushManager.getSubscription();\r\n\r\n    if (subscription) {\r\n      // Cek dan perbaiki keys jika perlu\r\n      if (!subscription.keys) {\r\n        subscription = await recreateSubscription(registration);\r\n      }\r\n      await sendSubscriptionToServer(subscription);\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    console.error(\"Error initializing push notifications:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function recreateSubscription(registration) {\r\n  const existingSubscription = await registration.pushManager.getSubscription();\r\n  if (existingSubscription) {\r\n    await existingSubscription.unsubscribe(); // Perbaikan di sini\r\n  }\r\n  const convertedVapidKey = urlBase64ToUint8Array(CONFIG.VAPID_PUBLIC_KEY);\r\n  return await registration.pushManager.subscribe({\r\n    userVisibleOnly: true,\r\n    applicationServerKey: convertedVapidKey,\r\n  });\r\n}\r\n","import routes from \"../routes/routes\";\nimport { getActiveRoute } from \"../routes/url-parser\";\nimport { isAuthenticated, removeAuthToken, getAuthToken } from \"../utils/auth\";\nimport CONFIG from \"../config\";\n\nimport {\n  isPushSupported,\n  requestNotificationPermission,\n  subscribeUser,\n  unsubscribeUser,\n  getCurrentSubscription,\n  initializePushNotifications,\n} from \"../utils/notif\";\n\nfunction renderIcon(iconFn, size = 20) {\n  return iconFn({ size, strokeWidth: 1.5, color: \"currentColor\" });\n}\n\nconsole.log(\"Current permission:\", Notification.permission);\nconsole.log(\"CONFIG:\", CONFIG);\nconsole.log(\"VAPID Key:\", CONFIG.VAPID_PUBLIC_KEY);\n\nclass App {\n  #content = null;\n  #drawerButton = null;\n  #navigationDrawer = null;\n\n  constructor({ navigationDrawer, drawerButton, content }) {\n    this.#content = content;\n    this.#drawerButton = drawerButton;\n    this.#navigationDrawer = navigationDrawer;\n    this._setupRouter = this._setupRouter.bind(this);\n    this._renderPageContent = this._renderPageContent.bind(this);\n    this._deferredPrompt = null;\n\n    this._setupDrawer();\n    this.updateAuthMenu();\n\n    this._setupRouter();\n    this._initializePushNotifications();\n    this._setupInstallPrompt();\n\n    window.addEventListener(\"authChange\", () => this.updateAuthMenu());\n  }\n\n  _setupInstallPrompt() {\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      // Mencegah banner default ditampilkan\n      e.preventDefault();\n\n      // Simpan event supaya bisa dipanggil nanti\n      this._deferredPrompt = e;\n\n      // Cegah duplikat tombol\n      if (!document.getElementById(\"install-button\")) {\n        this._showInstallButton();\n      }\n    });\n  }\n\n  _showInstallButton() {\n    const installButton = document.createElement(\"button\");\n    installButton.id = \"install-button\";\n    installButton.className = \"install-button\";\n    installButton.innerHTML =\n      '<i class=\"fas fa-download\"></i> Install Flowater';\n\n    installButton.addEventListener(\"click\", this._installApp.bind(this));\n    document.body.appendChild(installButton);\n  }\n\n  async _installApp() {\n    if (!this._deferredPrompt) return;\n\n    // Tampilkan prompt\n    this._deferredPrompt.prompt();\n\n    const { outcome } = await this._deferredPrompt.userChoice;\n    console.log(\n      `User ${\n        outcome === \"accepted\" ? \"accepted\" : \"dismissed\"\n      } the install prompt`\n    );\n\n    // Hapus event setelah digunakan\n    this._deferredPrompt = null;\n\n    // Hapus tombol\n    const button = document.getElementById(\"install-button\");\n    if (button) button.remove();\n  }\n\n  _setupRouter() {\n    const handleNavigation = async () => {\n      const url = getActiveRoute();\n      try {\n        if (document.startViewTransition) {\n          await document.startViewTransition(() => this._renderPageContent(url))\n            .finished;\n        } else {\n          await this._renderPageContent(url);\n        }\n      } catch (error) {\n        console.error(\"Navigation error:\", error);\n        window.location.hash = \"#/\";\n      }\n    };\n\n    handleNavigation();\n    window.addEventListener(\"hashchange\", handleNavigation);\n  }\n\n  async _renderPageContent(url) {\n    try {\n      // Dapatkan route yang aktif\n      const routePath = getActiveRoute(Object.keys(routes));\n\n      // Jika route tidak ditemukan, paksa ke 404\n      if (routePath === \"404\" || (!routes[routePath] && !routes[\"*\"])) {\n        url = \"#/404\";\n      }\n\n      const pageResolver = routes[url] || routes[\"*\"]; // Gunakan 404 sebagai fallback\n      const page =\n        typeof pageResolver === \"function\" ? pageResolver() : pageResolver;\n\n      this.#content.innerHTML = \"\";\n      const renderedContent = await page.render();\n      this.#content.appendChild(renderedContent);\n\n      if (page.afterRender) {\n        await page.afterRender();\n      }\n    } catch (error) {\n      console.error(\"Render error:\", error);\n      // Fallback ke halaman 404 jika terjadi error\n      window.location.hash = \"#/404\";\n    }\n  }\n  _setupDrawer() {\n    this.#drawerButton.addEventListener(\"click\", () => {\n      this.#navigationDrawer.classList.toggle(\"open\");\n    });\n\n    document.body.addEventListener(\"click\", (event) => {\n      if (\n        !this.#navigationDrawer.contains(event.target) &&\n        !this.#drawerButton.contains(event.target)\n      ) {\n        this.#navigationDrawer.classList.remove(\"open\");\n      }\n\n      this.#navigationDrawer.querySelectorAll(\"a\").forEach((link) => {\n        if (link.contains(event.target)) {\n          this.#navigationDrawer.classList.remove(\"open\");\n        }\n      });\n    });\n  }\n\n  updateAuthMenu() {\n    const navList = document.getElementById(\"nav-list\");\n    if (!navList) return;\n\n    const isAuth = isAuthenticated();\n\n    const menuItems = isAuth\n      ? [\n          '<li><a href=\"#/\">Beranda</a></li>',\n          '<li><a href=\"#/laporan\">List Laporan</a></li>',\n          '<li><a href=\"#/addLaporan\">Tambah Laporan</a></li>',\n          '<li><button id=\"notif-button\" class=\"notif\">Memuat Status Notifikasi...</button></li>',\n\n          `<li><a href=\"#\" class=\"cta-button\">Logout</a></li>`,\n        ]\n      : [\n          '<li><a href=\"#/addLaporan\">Tambah Laporan</a></li>',\n          '<li><a href=\"#/login\" class=\"cta-button\">Login</a></li>',\n        ];\n\n    navList.innerHTML = menuItems.join(\"\");\n\n    // Notification button\n\n    if (isAuth) {\n      this._updateNotificationButton();\n    }\n\n    // Logout\n    if (isAuth) {\n      const logoutButton = navList.querySelector(\".cta-button\");\n      logoutButton.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        removeAuthToken();\n        window.dispatchEvent(new Event(\"authChange\"));\n        window.location.hash = \"#/login\";\n      });\n    }\n  }\n\n  // ----------Notification----------\n\n  async _initializePushNotifications() {\n    try {\n      const token = getAuthToken();\n\n      if (!token || typeof token !== \"string\" || !token.startsWith(\"Bearer \")) {\n        console.log(\n          \"Jika User belum login, maka tidak menjalankan push notification\"\n        );\n        return;\n      }\n\n      console.log(\"Memulai inisialisasi push notification...\");\n      const success = await initializePushNotifications();\n\n      if (!success) {\n        console.log(\n          \"Push notification tidak diaktifkan (browser tidak support atau tidak ada subscription)\"\n        );\n      }\n    } catch (error) {\n      console.error(\"Gagal menginisialisasi push notification:\", error.message);\n    }\n  }\n\n  async _handlePushNotification() {\n    try {\n      // Cek autentikasi\n      if (!isAuthenticated()) {\n        throw new Error(\"Anda harus login terlebih dahulu\");\n      }\n\n      // Cek dukungan browser\n      if (!isPushSupported()) {\n        throw new Error(\"Browser tidak mendukung Push Notification\");\n      }\n\n      // Cek izin notifikasi\n      const permission = await Notification.requestPermission();\n      if (permission !== \"granted\") {\n        throw new Error(\"Izin notifikasi ditolak\");\n      }\n\n      // Dapatkan service worker registration\n      const registration = await navigator.serviceWorker.ready;\n\n      // Subscribe user\n      const subscription = await subscribeUser();\n      console.log(\"Subscription berhasil:\", subscription);\n\n      alert(\"Notifikasi berhasil diaktifkan!\");\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(`Gagal mengaktifkan notifikasi: ${error.message}`);\n    }\n  }\n\n  async _updateNotificationButton() {\n    const notifButton = document.getElementById(\"notif-button\");\n    if (!notifButton) return;\n\n    try {\n      const isSubscribed = await this._checkSubscriptionStatus();\n\n      if (isSubscribed) {\n        notifButton.textContent = \"Unsubscribe Notifikasi\";\n        notifButton.onclick = async () => {\n          await this._unsubscribeFromNotifications();\n          this._updateNotificationButton();\n        };\n      } else {\n        notifButton.textContent = \"Subscribe Notifikasi\";\n        notifButton.onclick = async () => {\n          await this._subscribeToNotifications();\n          this._updateNotificationButton();\n        };\n      }\n    } catch (error) {\n      console.error(\"Error updating notification button:\", error);\n      notifButton.textContent = \"Error - Coba Lagi\";\n      notifButton.onclick = async () => {\n        await this._handlePushNotification();\n        this._updateNotificationButton();\n      };\n    }\n  }\n\n  async _subscribeToNotifications() {\n    try {\n      const granted = await requestNotificationPermission();\n      if (!granted) {\n        alert(\"Izin notifikasi diperlukan untuk fitur ini\");\n        return;\n      }\n\n      await subscribeUser();\n      alert(\"Notifikasi berhasil diaktifkan\");\n      this.setupPushNotification(); // Update UI\n    } catch (error) {\n      alert(`Gagal mengaktifkan: ${error.message}`);\n    }\n  }\n\n  async _unsubscribeFromNotifications() {\n    try {\n      await unsubscribeUser();\n      alert(\"Notifikasi berhasil dimatikan\");\n      this.setupPushNotification(); // Update UI\n    } catch (error) {\n      alert(`Gagal mematikan: ${error.message}`);\n    }\n  }\n\n  async _checkSubscriptionStatus() {\n    if (!isPushSupported()) return false;\n\n    const registration = await navigator.serviceWorker.ready;\n    const subscription = await registration.pushManager.getSubscription();\n    return !!subscription;\n  }\n\n  async setupPushNotification() {\n    if (!isPushSupported()) {\n      console.log(\"Browser tidak mendukung Push Notification\");\n      return;\n    }\n\n    const notificationButton = document.getElementById(\"notification-button\");\n    if (!notificationButton) return;\n\n    const subscription = await getCurrentSubscription();\n\n    if (subscription) {\n      notificationButton.textContent = \"Nonaktifkan Notifikasi\";\n      notificationButton.onclick = this.handleUnsubscribe.bind(this);\n    } else {\n      notificationButton.textContent = \"Aktifkan Notifikasi\";\n      notificationButton.onclick = this.handleSubscribe.bind(this);\n    }\n  }\n\n  async handleSubscribe() {\n    try {\n      const granted = await requestNotificationPermission();\n      if (!granted) {\n        alert(\"Izin notifikasi diperlukan untuk fitur ini\");\n        return;\n      }\n\n      await subscribeUser();\n      alert(\"Notifikasi berhasil diaktifkan\");\n      this.setupPushNotification(); // Update UI\n    } catch (error) {\n      alert(`Gagal mengaktifkan: ${error.message}`);\n    }\n  }\n\n  async handleUnsubscribe() {\n    try {\n      await unsubscribeUser();\n      alert(\"Notifikasi berhasil dimatikan\");\n      this.setupPushNotification(); // Update UI\n    } catch (error) {\n      alert(`Gagal mematikan: ${error.message}`);\n    }\n  }\n\n  async renderPage() {\n    return this._renderPageContent(getActiveRoute());\n  }\n}\nexport default App;\n","// CSS imports\nimport \"../styles/styles.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport App from \"./pages/app\";\n\nasync function initializeApp() {\n  const app = new App({\n    content: document.querySelector(\"#main-content\"),\n    drawerButton: document.querySelector(\"#drawer-button\"),\n    navigationDrawer: document.querySelector(\"#navigation-drawer\"),\n  });\n\n  await app.renderPage();\n\n  window.addEventListener(\"hashchange\", async () => {\n    await app.renderPage();\n  });\n\n  // Inisialisasi halaman login jika ada\n  if (document.getElementById(\"login-form\")) {\n    const { default: LoginPage } = await import(\n      \"./pages/auth/login/login-page\"\n    );\n    const { default: LoginPresenter } = await import(\n      \"./pages/auth/login/login-presenter\"\n    );\n    const loginPage = new LoginPage();\n    await loginPage.render();\n    await loginPage.afterRender();\n    new LoginPresenter(loginPage);\n  }\n\n  // Inisialisasi halaman register jika ada\n  if (document.getElementById(\"register-form\")) {\n    const { default: RegisterPage } = await import(\n      \"./pages/auth/register/register-page\"\n    );\n    const { default: RegisterPresenter } = await import(\n      \"./pages/auth/register/register-presenter\"\n    );\n    const registerPage = new RegisterPage();\n    await registerPage.render();\n    await registerPage.afterRender();\n    new RegisterPresenter(registerPage);\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  initializeApp().catch(console.error);\n});\n\n// Service Worker Registration\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    const swUrl =\n      process.env.NODE_ENV === \"development\" ? \"/sw.dev.js\" : \"/sw.js\";\n\n    navigator.serviceWorker\n      .register(swUrl)\n      .then((reg) => console.log(\"Service Worker registered:\", reg))\n      .catch((err) =>\n        console.error(\"Service Worker registration failed:\", err)\n      );\n  });\n}\n","import RegisterPresenter from \"./register-presenter\";\r\n\r\nexport default class RegisterPage {\r\n  async render() {\r\n    const container = document.createElement(\"div\");\r\n    container.innerHTML = `\r\n      <main id=\"mainContent\">\r\n        <a href=\"#mainContent\" class=\"skip-link\">Skip to content</a>\r\n        <article class=\"auth-container\" aria-labelledby=\"registerHeading\">\r\n          <h1 id=\"registerHeading\" style=\"text-align:center; margin-bottom:5px;\" >Daftar</h1>\r\n          <form id=\"register-form\" aria-label=\"Registration form\">\r\n            <div class=\"form-group\">\r\n              <label for=\"name\">Nama Lengkap</label>\r\n              <input \r\n                type=\"text\" \r\n                id=\"name\" \r\n                name=\"name\" \r\n                required\r\n                aria-required=\"true\"\r\n                autocomplete=\"name\"\r\n                placeholder=\"Masukkan nama lengkap anda\"\r\n              >\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"email\">Email</label>\r\n              <input \r\n                type=\"email\" \r\n                id=\"email\" \r\n                name=\"email\" \r\n                required\r\n                aria-required=\"true\"\r\n                autocomplete=\"email\"\r\n                placeholder=\"Masukkan email anda\"\r\n              >\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"password\">Password</label>\r\n              <input \r\n                type=\"password\" \r\n                id=\"password\" \r\n                name=\"password\" \r\n                required\r\n                minlength=\"8\"\r\n                aria-required=\"true\"\r\n                autocomplete=\"new-password\"\r\n                placeholder=\"Masukkan password anda\"\r\n                aria-describedby=\"passwordHelp\"\r\n              >\r\n              <small id=\"passwordHelp\" class=\"help-text\">Minimum 8 karakter</small>\r\n            </div>\r\n            <div id=\"register-error\" class=\"error-message\" role=\"alert\" aria-live=\"assertive\" style=\"display: none;\"></div>\r\n            <button type=\"submit\" class=\"btn\">Daftar</button>\r\n          </form>\r\n          <p>Sudah memiliki akun? <a href=\"#/login\">Masuk</a></p>\r\n        </article>\r\n      </main>\r\n    `;\r\n    return container;\r\n  }\r\n\r\n  async afterRender() {\r\n    const skipLink = document.querySelector(\".skip-link\");\r\n    skipLink.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      document.getElementById(\"name\").focus();\r\n    });\r\n    new RegisterPresenter(this);\r\n  }\r\n}\r\n","import { openDB } from \"idb\";\r\n\r\nconst DB_NAME = \"story-db\";\r\nconst STORE_NAME = \"stories\";\r\nconst DB_VERSION = 1;\r\n\r\nconst dbPromise = openDB(DB_NAME, DB_VERSION, {\r\n  upgrade(db) {\r\n    if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n      db.createObjectStore(STORE_NAME, { keyPath: \"id\" });\r\n    }\r\n  },\r\n});\r\n\r\nconst StoryIDB = {\r\n  async getAllStories() {\r\n    return (await dbPromise).getAll(STORE_NAME);\r\n  },\r\n\r\n  async saveStories(stories) {\r\n    const db = await dbPromise;\r\n    const tx = db.transaction(STORE_NAME, \"readwrite\");\r\n    for (const story of stories) {\r\n      tx.store.put(story);\r\n    }\r\n    return tx.done;\r\n  },\r\n\r\n  async deleteStory(id) {\r\n    return (await dbPromise).delete(STORE_NAME, id);\r\n  },\r\n\r\n  async clearAll() {\r\n    return (await dbPromise).clear(STORE_NAME);\r\n  },\r\n};\r\n\r\nexport default StoryIDB;\r\n","class LoadingIndicator extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.attachShadow({ mode: \"open\" });\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.shadowRoot.innerHTML = `\r\n        <style>\r\n          .loading-container {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0,0,0,0.5);\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            z-index: 9999;\r\n          }\r\n          \r\n          .container {\r\n            --uib-size: 45px;\r\n            --uib-color: #9dceff; \r\n            --uib-speed: 1.75s;\r\n            display: flex;\r\n            align-items: flex-end;\r\n            padding-bottom: 20%;\r\n            justify-content: space-between;\r\n            width: var(--uib-size);\r\n            height: calc(var(--uib-size) * 0.6);\r\n          }\r\n          \r\n          .cube {\r\n            flex-shrink: 0;\r\n            width: calc(var(--uib-size) * 0.2);\r\n            height: calc(var(--uib-size) * 0.2);\r\n            animation: jump var(--uib-speed) ease-in-out infinite;\r\n          }\r\n          \r\n          .cube__inner {\r\n            display: block;\r\n            height: 100%;\r\n            width: 100%;\r\n            border-radius: 25%;\r\n            background-color: var(--uib-color);\r\n            transform-origin: center bottom;\r\n            animation: morph var(--uib-speed) ease-in-out infinite;\r\n            transition: background-color 0.3s ease;\r\n          }\r\n          \r\n          .cube:nth-child(2) {\r\n            animation-delay: calc(var(--uib-speed) * -0.36);\r\n          }\r\n          \r\n          .cube:nth-child(2) .cube__inner {\r\n            animation-delay: calc(var(--uib-speed) * -0.36);\r\n          }\r\n          \r\n          .cube:nth-child(3) {\r\n            animation-delay: calc(var(--uib-speed) * -0.2);\r\n          }\r\n          \r\n          .cube:nth-child(3) .cube__inner {\r\n            animation-delay: calc(var(--uib-speed) * -0.2);\r\n          }\r\n          \r\n          @keyframes jump {\r\n            0% {\r\n              transform: translateY(0px);\r\n            }\r\n            30% {\r\n              transform: translateY(0px);\r\n              animation-timing-function: ease-out;\r\n            }\r\n            50% {\r\n              transform: translateY(-200%);\r\n              animation-timing-function: ease-in;\r\n            }\r\n            75% {\r\n              transform: translateY(0px);\r\n              animation-timing-function: ease-in;\r\n            }\r\n          }\r\n          \r\n          @keyframes morph {\r\n            0% {\r\n              transform: scaleY(1);\r\n            }\r\n            10% {\r\n              transform: scaleY(1);\r\n            }\r\n            20%, 25% {\r\n              transform: scaleY(0.6) scaleX(1.3);\r\n              animation-timing-function: ease-in-out;\r\n            }\r\n            30% {\r\n              transform: scaleY(1.15) scaleX(0.9);\r\n              animation-timing-function: ease-in-out;\r\n            }\r\n            40% {\r\n              transform: scaleY(1);\r\n            }\r\n            70%, 85%, 100% {\r\n              transform: scaleY(1);\r\n            }\r\n            75% {\r\n              transform: scaleY(0.8) scaleX(1.2);\r\n            }\r\n          }\r\n        </style>\r\n        <div class=\"loading-container\">\r\n          <div class=\"container\">\r\n            <div class=\"cube\"><div class=\"cube__inner\"></div></div>\r\n            <div class=\"cube\"><div class=\"cube__inner\"></div></div>\r\n            <div class=\"cube\"><div class=\"cube__inner\"></div></div>\r\n          </div>\r\n        </div>\r\n      `;\r\n  }\r\n}\r\n\r\ncustomElements.define(\"loading-indicator\", LoadingIndicator);\r\n\r\nexport function showLoader() {\r\n  const loader = document.getElementById(\"global-loader\");\r\n  if (loader) loader.style.display = \"block\";\r\n}\r\n\r\nexport function hideLoader() {\r\n  const loader = document.getElementById(\"global-loader\");\r\n  if (loader) loader.style.display = \"none\";\r\n}\r\n","// config.js\nconst CONFIG = {\n  BASE_URL: \"https://story-api.dicoding.dev/v1\",\n  VAPID_PUBLIC_KEY:\n    \"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk\",\n};\n\nexport default CONFIG; // Pastikan menggunakan export default\n","import LoginPresenter from \"./login-presenter\";\r\n\r\nexport default class LoginPage {\r\n  async render() {\r\n    const container = document.createElement(\"div\");\r\n    container.innerHTML = `\r\n<main id=\"mainContent\" tabindex=\"-1\">\r\n  <article class=\"auth-container\" aria-labelledby=\"loginHeading\">\r\n    <h1 id=\"loginHeading\" style=\"text-align:center; margin-bottom:5px;\">Masuk</h1>\r\n\r\n    <form id=\"login-form\" aria-label=\"Login form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"email\">Email</label>\r\n        <input \r\n          type=\"email\" \r\n          id=\"email\" \r\n          name=\"email\" \r\n          required\r\n          aria-required=\"true\"\r\n          autocomplete=\"email\"\r\n          placeholder=\"Masukkan email anda\"\r\n          tabindex=\"0\"\r\n        >\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Password</label>\r\n        <input \r\n          type=\"password\" \r\n          id=\"password\" \r\n          name=\"password\" \r\n          required\r\n          minlength=\"8\"\r\n          aria-required=\"true\"\r\n          autocomplete=\"current-password\"\r\n          placeholder=\"Masukkan password anda\"\r\n          tabindex=\"0\"\r\n        >\r\n      </div>\r\n\r\n      <div id=\"login-error\" class=\"error-message\" role=\"alert\" aria-live=\"assertive\" style=\"display: none;\"></div>\r\n\r\n      <button type=\"submit\" class=\"btn\" tabindex=\"0\">Masuk</button>\r\n    </form>\r\n\r\n    <p>Belum memiliki akun? <a href=\"#/register\" tabindex=\"0\">Daftar</a></p>\r\n  </article>\r\n</main>\r\n\r\n    `;\r\n    return container;\r\n  }\r\n\r\n  async afterRender() {\r\n    const skipLink = document.querySelector(\".skip-link\");\r\n    skipLink.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      document.getElementById(\"email\").focus();\r\n    });\r\n    new LoginPresenter(this);\r\n  }\r\n}\r\n","// auth.js\r\nexport const setAuthToken = (token) => {\r\n  localStorage.setItem(\"authToken\", token);\r\n  window.dispatchEvent(new Event(\"authChange\"));\r\n};\r\n\r\nexport function getAuthToken() {\r\n  // Cek di localStorage\r\n  const token = localStorage.getItem(\"authToken\");\r\n\r\n  // Validasi token\r\n  if (!token || token === \"undefined\" || token === \"null\") {\r\n    return null;\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\nexport const removeAuthToken = () => {\r\n  localStorage.removeItem(\"authToken\");\r\n  window.dispatchEvent(new Event(\"authChange\"));\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  return !!getAuthToken();\r\n};\r\n\r\nexport const checkAuthenticatedRoute = (page) => {\r\n  if (!isAuthenticated()) {\r\n    window.location.hash = \"#/login\";\r\n    return null;\r\n  }\r\n  return page;\r\n};\r\n\r\nexport const checkUnauthenticatedRouteOnly = (page) => {\r\n  if (isAuthenticated()) {\r\n    window.location.hash = \"#/\";\r\n    return null;\r\n  }\r\n  return page;\r\n};\r\n","import { AuthAPI } from \"../../../data/api\";\r\nimport { setAuthToken } from \"../../../utils/auth\";\r\nimport { showLoader, hideLoader } from \"../../../utils/loader\";\r\n\r\nexport default class RegisterPresenter {\r\n  constructor(view) {\r\n    this.view = view;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.form = document.getElementById(\"register-form\");\r\n    this.errorElement = document.getElementById(\"register-error\");\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    this.form.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n      await this.handleRegister();\r\n    });\r\n  }\r\n\r\n  async handleRegister() {\r\n    const name = document.getElementById(\"name\").value;\r\n    const email = document.getElementById(\"email\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n\r\n    // Clear previous errors\r\n    this.clearErrors();\r\n\r\n    // Validation\r\n    if (!name || !email || !password) {\r\n      this.showError(\"Silakan isi semua kolom\");\r\n      return;\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      this.showError(\"Password minimal 8 karakter\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      showLoader(); // Menampilkan loader saat proses registrasi\r\n      const response = await AuthAPI.register({ name, email, password });\r\n\r\n      if (response.error) {\r\n        this.showError(response.message);\r\n      } else {\r\n        this.showSuccess(\"Register berhasil! Mengarahkan...\");\r\n        // Redirect to login after successful registration\r\n        setTimeout(() => {\r\n          window.location.href = \"#/login\";\r\n        }, 1500); // Delay 1.5 detik sebelum redirect\r\n      }\r\n    } catch (error) {\r\n      this.showError(\"Registrasi gagal. Silakan coba lagi.\");\r\n      console.error(\"Proses Registrasi Gagal:\", error);\r\n    } finally {\r\n      hideLoader(); // Menyembunyikan loader setelah selesai\r\n    }\r\n  }\r\n\r\n  showError(message) {\r\n    this.errorElement.textContent = message;\r\n    this.errorElement.className = \"error-message error\";\r\n    this.errorElement.style.display = \"block\";\r\n    this.errorElement.focus();\r\n  }\r\n\r\n  showSuccess(message) {\r\n    this.errorElement.textContent = message;\r\n    this.errorElement.className = \"error-message success\";\r\n    this.errorElement.style.display = \"block\";\r\n  }\r\n\r\n  clearErrors() {\r\n    this.errorElement.style.display = \"none\";\r\n    this.errorElement.className = \"error-message\";\r\n  }\r\n}\r\n","import CONFIG from \"../config\";\nimport { getAuthToken } from \"../utils/auth\";\n\nconst ENDPOINTS = {\n  ENDPOINT: `${CONFIG.BASE_URL}`,\n};\n\nexport const StoryAPI = {\n  async getAllStories({ page = 1, size = 12, location = 0 } = {}) {\n    const response = await fetch(\n      `${ENDPOINTS.ENDPOINT}/stories?page=${page}&size=${size}&location=${location}`,\n      {\n        headers: {\n          Authorization: `Bearer ${getAuthToken()}`,\n        },\n      }\n    );\n    return response.json();\n  },\n\n  async getStoryDetail(id) {\n    const response = await fetch(`${ENDPOINTS.ENDPOINT}/stories/${id}`, {\n      headers: {\n        Authorization: `Bearer ${getAuthToken()}`,\n      },\n    });\n    return response.json();\n  },\n  async addStory(formData, token) {\n    const response = await fetch(`${ENDPOINTS.ENDPOINT}/stories`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      body: formData,\n    });\n    return response.json();\n  },\n\n  async addStoryGuest(formData) {\n    const response = await fetch(`${ENDPOINTS.ENDPOINT}/stories/guest`, {\n      method: \"POST\",\n      body: formData,\n    });\n    return response.json();\n  },\n  async sendStoryNotification(storyId, notificationData) {\n    const response = await fetch(\n      `${ENDPOINTS.ENDPOINT}/stories/${storyId}/notify`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${getAuthToken()}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(notificationData),\n      }\n    );\n    return response.json();\n  },\n};\n\nexport const AuthAPI = {\n  async register({ name, email, password }) {\n    const response = await fetch(`${ENDPOINTS.ENDPOINT}/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ name, email, password }),\n    });\n    return response.json();\n  },\n\n  async login({ email, password }) {\n    const response = await fetch(`${ENDPOINTS.ENDPOINT}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    });\n    return response.json();\n  },\n};\n\nexport const NotificationAPI = {\n  async subscribePushNotification(subscription) {\n    const response = await fetch(\n      `${ENDPOINTS.ENDPOINT}/notifications/subscribe`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getAuthToken()}`,\n        },\n        body: JSON.stringify({\n          endpoint: subscription.endpoint,\n          keys: {\n            p256dh: subscription.keys.p256dh,\n            auth: subscription.keys.auth,\n          },\n        }),\n      }\n    );\n    return response.json();\n  },\n\n  async unsubscribePushNotification(endpoint) {\n    const response = await fetch(\n      `${ENDPOINTS.ENDPOINT}/notifications/subscribe`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getAuthToken()}`,\n        },\n        body: JSON.stringify({ endpoint }),\n      }\n    );\n    return response.json();\n  },\n\n  async sendStoryNotification(storyId) {\n    const response = await fetch(\n      `${ENDPOINTS.ENDPOINT}/stories/${storyId}/notify`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${getAuthToken()}`,\n        },\n      }\n    );\n    return response.json();\n  },\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkflowater_webpack\"] = self[\"webpackChunkflowater_webpack\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [96], function() { return __webpack_require__(91); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","LoginPresenter","constructor","view","this","init","form","document","getElementById","errorElement","bindEvents","addEventListener","async","e","preventDefault","handleLogin","email","value","password","clearErrors","showLoader","response","AuthAPI","login","error","showError","message","setAuthToken","loginResult","token","showSuccess","setTimeout","window","location","href","hideLoader","textContent","className","style","display","focus","HomePage","render","container","createElement","innerHTML","afterRender","LaporanPresenter","listStory","_getAllStories","length","showStories","StoryIDB","saveStories","localStories","getAllStories","StoryAPI","L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","LaporanPage","storiesContainer","map","clearBtn","then","mod","default","clearAll","alert","skipLink","querySelector","focusTarget","setAttribute","initialMap","center","scrollWheelZoom","zoom","attribution","maxZoom","addTo","addMarkers","stories","eachLayer","layer","removeLayer","forEach","story","lat","lon","bindPopup","name","description","Date","createdAt","toLocaleString","setView","_generateStoryCard","join","photoUrl","id","AddStoryPresenter","state","marker","photoFile","mediaStream","selectedCamera","_setupDOMReferences","_initializeMap","_setupEventListeners","_loadCameras","elements","photoInput","photoPreview","cameraPreview","cameraSelect","getLocationBtn","latInput","lonInput","key","Error","mapContainer","_leaflet_id","reuse","invalidateSize","tap","on","_setLocation","latlng","lng","_switchCamera","target","catch","console","_toggleCamera","_capturePhoto","_stopCamera","hidden","_getCurrentLocation","_clearLocation","_handleSubmit","_handleFileSelect","navigator","mediaDevices","getUserMedia","video","getTracks","track","stop","devices","enumerateDevices","availableCameras","filter","d","kind","_updateCameraOptions","backCamera","find","cam","label","toLowerCase","includes","deviceId","select","device","option","text","options","appendChild","constraints","exact","facingMode","width","ideal","height","srcObject","Promise","resolve","onloadedmetadata","play","enabled","load","pause","canvas","paused","readyState","HTMLMediaElement","HAVE_ENOUGH_DATA","videoWidth","videoHeight","getContext","drawImage","toBlob","blob","File","now","type","src","URL","createObjectURL","event","file","files","match","position","reject","geolocation","getCurrentPosition","enableHighAccuracy","timeout","coords","latitude","longitude","_getGeoError","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","setLatLng","trim","formData","FormData","append","getAuthToken","addStory","addStoryGuest","Notification","permission","serviceWorker","ready","registration","showNotification","body","icon","tag","vibrate","data","dateOfArrival","primaryKey","hash","onPageRevisit","AddStoryPage","presenter","isFirstRender","onPageRevisited","clearError","DetailPresenter","storyAPI","handleSkipLink","loadStoryDetail","getStoryDetail","showStoryDetail","NotFoundPage","lottie","renderer","loop","autoplay","animationData","/","checkAuthenticatedRoute","/laporan","split","/addLaporan","AddLaporanPage","/login","checkUnauthenticatedRouteOnly","LoginPage","/register","RegisterPage","*","/404","extractPathnameSegments","path","splitUrl","resource","constructRouteFromSegments","pathSegments","pathname","concat","getActivePathname","replace","getActiveRoute","routes","constructedRoute","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","i","charCodeAt","isPushSupported","requestNotificationPermission","requestPermission","getCurrentSubscription","pushManager","getSubscription","subscribeUser","subscription","convertedVapidKey","CONFIG","VAPID_PUBLIC_KEY","subscribe","userVisibleOnly","applicationServerKey","endpoint","sendSubscriptionToServer","unsubscribeUser","unsubscribe","fetch","BASE_URL","method","headers","Authorization","JSON","stringify","ok","json","deleteSubscriptionFromServer","localStorage","removeItem","keys","p256dh","endpointParts","extractP256dhKey","auth","crypto","getRandomValues","errorData","initializePushNotifications","existingSubscription","recreateSubscription","_content","WeakMap","_drawerButton","_navigationDrawer","navigationDrawer","drawerButton","content","_classPrivateFieldInitSpec","_classPrivateFieldSet","_setupRouter","bind","_renderPageContent","_deferredPrompt","_setupDrawer","updateAuthMenu","_initializePushNotifications","_setupInstallPrompt","_showInstallButton","installButton","_installApp","prompt","outcome","userChoice","button","remove","handleNavigation","url","startViewTransition","finished","routePath","Object","pageResolver","page","_classPrivateFieldGet","renderedContent","classList","toggle","contains","querySelectorAll","link","navList","isAuth","isAuthenticated","menuItems","_updateNotificationButton","removeAuthToken","dispatchEvent","Event","startsWith","_handlePushNotification","notifButton","_checkSubscriptionStatus","onclick","_unsubscribeFromNotifications","_subscribeToNotifications","setupPushNotification","notificationButton","handleUnsubscribe","handleSubscribe","renderPage","app","App","loginPage","RegisterPresenter","registerPage","initializeApp","register","reg","err","STORE_NAME","dbPromise","openDB","upgrade","db","objectStoreNames","createObjectStore","keyPath","getAll","tx","transaction","store","put","done","deleteStory","delete","clear","LoadingIndicator","HTMLElement","super","attachShadow","mode","connectedCallback","shadowRoot","loader","customElements","define","setItem","getItem","handleRegister","ENDPOINTS","size","sendStoryNotification","storyId","notificationData","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","amdO","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","hasOwnProperty","Symbol","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","scripts","getElementsByTagName","test","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","push","__webpack_exports__"],"sourceRoot":""}